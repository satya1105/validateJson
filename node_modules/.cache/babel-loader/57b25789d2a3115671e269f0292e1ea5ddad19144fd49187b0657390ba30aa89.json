{"ast":null,"code":"import React,{useState,useRef}from'react';import'./JsonTool.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function JsonTool(){const[jsonInput,setJsonInput]=useState('');const[error,setError]=useState('');const[lineNumbers,setLineNumbers]=useState('1');const[historyVisible,setHistoryVisible]=useState(false);const[history,setHistory]=useState(()=>JSON.parse(sessionStorage.getItem('jsonHistory'))||[]);const textareaRef=useRef(null);const lineNumbersRef=useRef(null);const handleInputChange=event=>{setJsonInput(event.target.value);setError('');updateLineNumbers(event.target.value);};const validateJson=()=>{try{const parsedJson=JSON.parse(jsonInput);const formattedJson=JSON.stringify(parsedJson,null,2);setJsonInput(formattedJson);updateLineNumbers(formattedJson);updateHistory(formattedJson);setError('');}catch(err){setError(\"Invalid JSON! Error: \".concat(err.message));}};const compressJson=()=>{try{const parsedJson=JSON.parse(jsonInput);const compressedJson=JSON.stringify(parsedJson);setJsonInput(compressedJson);updateLineNumbers(compressedJson);updateHistory(compressedJson);setError('');}catch(err){setError(\"Cannot compress JSON! Error: \".concat(err.message));}};const clearJson=()=>{setJsonInput('');setError('');setLineNumbers('1');// Reset line numbers\n};const copyText=()=>{if(navigator.clipboard){navigator.clipboard.writeText(jsonInput).then(()=>{alert('Copied to clipboard!');}).catch(err=>{setError(\"Failed to copy text: \".concat(err.message));});}else{setError('Clipboard API not available.');}};const updateLineNumbers=text=>{const lines=text.split('\\n');const newLineNumbers=lines.map((_,index)=>index+1).join('\\n');setLineNumbers(newLineNumbers);if(lineNumbersRef.current){lineNumbersRef.current.scrollTop=textareaRef.current.scrollTop;}};const handleScroll=()=>{if(lineNumbersRef.current){lineNumbersRef.current.scrollTop=textareaRef.current.scrollTop;}};const updateHistory=json=>{const newEntry={json,timestamp:new Date().toLocaleString()};const newHistory=[newEntry,...history].slice(0,10);// Keep only the latest 50 entries\nsetHistory(newHistory);sessionStorage.setItem('jsonHistory',JSON.stringify(newHistory));};const toggleHistory=()=>{setHistoryVisible(!historyVisible);};return/*#__PURE__*/_jsxs(\"div\",{className:\"json-wrapper\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"json-heading\",children:\"Check you JSON here\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"json-text-area\",ref:textareaRef,value:jsonInput,onChange:handleInputChange,onScroll:handleScroll,rows:\"10\",cols:\"50\",placeholder:\"Enter JSON here...\",style:{resize:'none'}}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:validateJson,children:\"Validate\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:compressJson,children:\"Compress JSON\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:clearJson,children:\"Clear\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:toggleHistory,children:historyVisible?'Hide History':'Show History'}),jsonInput&&/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:copyText,children:\"Copy\"})]}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:error}),historyVisible&&/*#__PURE__*/_jsx(\"ul\",{children:history.map((entry,index)=>/*#__PURE__*/_jsxs(\"li\",{children:[entry.timestamp,\": \",entry.json]},index))})]});}export default JsonTool;","map":{"version":3,"names":["React","useState","useRef","jsx","_jsx","jsxs","_jsxs","JsonTool","jsonInput","setJsonInput","error","setError","lineNumbers","setLineNumbers","historyVisible","setHistoryVisible","history","setHistory","JSON","parse","sessionStorage","getItem","textareaRef","lineNumbersRef","handleInputChange","event","target","value","updateLineNumbers","validateJson","parsedJson","formattedJson","stringify","updateHistory","err","concat","message","compressJson","compressedJson","clearJson","copyText","navigator","clipboard","writeText","then","alert","catch","text","lines","split","newLineNumbers","map","_","index","join","current","scrollTop","handleScroll","json","newEntry","timestamp","Date","toLocaleString","newHistory","slice","setItem","toggleHistory","className","children","ref","onChange","onScroll","rows","cols","placeholder","style","resize","onClick","color","entry"],"sources":["/Users/satyaranjan/Documents/playground/validateJson/src/JsonTool.js"],"sourcesContent":["import React, { useState, useRef } from 'react';\nimport './JsonTool.css';\n\nfunction JsonTool() {\n    const [jsonInput, setJsonInput] = useState('');\n    const [error, setError] = useState('');\n    const [lineNumbers, setLineNumbers] = useState('1'); \n    const [historyVisible, setHistoryVisible] = useState(false);\n    const [history, setHistory] = useState(\n        () => JSON.parse(sessionStorage.getItem('jsonHistory')) || []\n    );\n    const textareaRef = useRef(null);\n    const lineNumbersRef = useRef(null);\n\n    const handleInputChange = (event) => {\n        setJsonInput(event.target.value);\n        setError(''); \n        updateLineNumbers(event.target.value);\n    };\n\n    const validateJson = () => {\n        try {\n            const parsedJson = JSON.parse(jsonInput);\n            const formattedJson = JSON.stringify(parsedJson, null, 2);\n            setJsonInput(formattedJson);\n            updateLineNumbers(formattedJson);\n            updateHistory(formattedJson);\n            setError('');\n        } catch (err) {\n            setError(`Invalid JSON! Error: ${err.message}`);\n        }\n    };\n\n    const compressJson = () => {\n        try {\n            const parsedJson = JSON.parse(jsonInput);\n            const compressedJson = JSON.stringify(parsedJson);\n            setJsonInput(compressedJson);\n            updateLineNumbers(compressedJson);\n            updateHistory(compressedJson);\n            setError('');\n        } catch (err) {\n            setError(`Cannot compress JSON! Error: ${err.message}`);\n        }\n    };\n\n    const clearJson = () => {\n        setJsonInput('');\n        setError('');\n        setLineNumbers('1'); // Reset line numbers\n    };\n\n    const copyText = () => {\n        if (navigator.clipboard) {\n            navigator.clipboard.writeText(jsonInput).then(() => {\n                alert('Copied to clipboard!');\n            }).catch(err => {\n                setError(`Failed to copy text: ${err.message}`);\n            });\n        } else {\n            setError('Clipboard API not available.');\n        }\n    };\n\n    const updateLineNumbers = (text) => {\n        const lines = text.split('\\n');\n        const newLineNumbers = lines.map((_, index) => index + 1).join('\\n');\n        setLineNumbers(newLineNumbers);\n        if (lineNumbersRef.current) {\n            lineNumbersRef.current.scrollTop = textareaRef.current.scrollTop;\n        }\n    };\n\n    const handleScroll = () => {\n        if (lineNumbersRef.current) {\n            lineNumbersRef.current.scrollTop = textareaRef.current.scrollTop;\n        }\n    };\n\n    const updateHistory = (json) => {\n        const newEntry = { json, timestamp: new Date().toLocaleString() };\n        const newHistory = [newEntry, ...history].slice(0, 10); // Keep only the latest 50 entries\n        setHistory(newHistory);\n        sessionStorage.setItem('jsonHistory', JSON.stringify(newHistory));\n    };\n\n    const toggleHistory = () => {\n        setHistoryVisible(!historyVisible);\n    };\n\n    return (\n        <div className='json-wrapper'>\n            <h3 className='json-heading'>Check you JSON here</h3>\n            <textarea\n                className='json-text-area'\n                ref={textareaRef}\n                value={jsonInput}\n                onChange={handleInputChange}\n                onScroll={handleScroll}\n                rows=\"10\"\n                cols=\"50\"\n                placeholder=\"Enter JSON here...\"\n                style={{ resize: 'none' }}\n            />\n            <div>\n                <button className='btn' onClick={validateJson}>Validate</button>\n                <button className='btn' onClick={compressJson}>Compress JSON</button>\n                <button className='btn' onClick={clearJson}>Clear</button>\n                <button className='btn' onClick={toggleHistory}>{historyVisible ? 'Hide History' : 'Show History'}</button>\n                {jsonInput && (\n                    <button className='btn' onClick={copyText}>Copy</button>\n                )}\n            </div>\n            {error && <p style={{ color: 'red' }}>{error}</p>}\n            {historyVisible && (\n                <ul>\n                    {history.map((entry, index) => (\n                        <li key={index}>{entry.timestamp}: {entry.json}</li>\n                    ))}\n                </ul>\n            )}\n        </div>\n    );\n}\n\nexport default JsonTool;\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}